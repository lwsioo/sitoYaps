<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Scopri di più</title>
    <link rel="icon" type="image/x-icon" href="res/csg.png" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Segoe UI", sans-serif;
        background-color: #f4f4f8;
        margin: 0;
        padding: 0;
        user-select: none;
        background-image: url("res/sfondoChiaro.jpg");
        background-repeat: no-repeat;
        background-size: cover;
        background-position: center;
        background-attachment: scroll;
        min-height: 100vh;
      }

      header {
        background-color: #a331cd;
        color: white;
        padding: 20px;
        font-size: 2em;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        min-height: 80px;
      }

      header a {
        position: absolute;
        left: 20px;
        top: 50%;
        transform: translateY(-50%);
        display: flex;
        align-items: center;
      }

      .section {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        justify-content: center;
        gap: 30px;
        background-color: white;
        border-radius: 15px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        padding: 20px;
        margin-bottom: 30px;
      }

      .media {
        flex: 1 1 400px;
        max-width: 500px;
      }

      .text {
        flex: 1 1 400px;
        max-width: 500px;
        text-align: left;
      }

      .text h2 {
        font-size: 1.6em;
        margin-bottom: 10px;
      }

      .text p {
        font-size: 1em;
        color: #444;
        line-height: 1.6;
      }

      .container-main {
        width: 80%;
        margin: 30px auto;
      }

      .img-container {
        position: relative;
        width: 100%;
      }

      .copertinaFumetto {
        display: block;
        width: 100%;
        height: auto;
        border-radius: 10px;
      }

      .overlay {
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        height: 100%;
        width: 100%;
        opacity: 0;
        transition: 0.5s ease;
        background-color: rgba(0, 0, 0, 0.3);
        user-select: none;
        border-radius: 10px;
      }

      .img-container:hover .overlay {
        opacity: 1;
        cursor: pointer;
      }

      .overlay-text {
        color: white;
        font-size: 20px;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
      }

      .modal-panel {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.95);
        z-index: 10000;
        overflow: hidden;
        align-items: center;
        justify-content: center;
      }

      .close-panel {
        position: fixed;
        top: 20px;
        right: 40px;
        color: white;
        font-size: 35px;
        font-weight: bold;
        cursor: pointer;
        transition: 300ms;
        z-index: 10001;
      }

      .close-panel:hover,
      .close-panel:focus {
        color: #d20000;
        text-decoration: none;
        cursor: pointer;
        transform: rotate(360deg);
      }

      .zoom-container {
        max-width: 90%;
        max-height: 90vh;
        margin: auto;
        overflow: hidden;
        position: relative;
        cursor: grab;
      }

      .zoom-container img {
        transition: transform 0.25s ease;
        will-change: transform;
        display: block;
        max-width: none;
        max-height: none;
      }

      .carousel-inner img {
        border-radius: 10px;
        max-height: 500px;
        object-fit: contain;
      }

      .fumetto-img {
        width: 100%;
        height: auto;
        max-height: 600px;
        object-fit: contain;
      }
    </style>
  </head>
  <body>
    <header>
      Scopri di Più
      <a href="index.html">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="50"
          height="50"
          fill="white"
          class="bi bi-house"
          viewBox="0 1 16 16"
        >
          <path
            d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L2 8.207V13.5A1.5 1.5 0 0 0 3.5 15h9a1.5 1.5 0 0 0 1.5-1.5V8.207l.646.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293zM13 7.207V13.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V7.207l5-5z"
          />
        </svg>
      </a>
    </header>

    <div class="container-main">
      <div class="section">
        <div class="media">
          <div id="carouselExampleControls" class="carousel slide">
            <div class="carousel-inner">
              <div class="carousel-item active">
                <img
                  class="d-block w-100"
                  src="res/info/presentazione/ppt1.jpg"
                  alt="First slide"
                />
              </div>
              <div class="carousel-item">
                <img
                  class="d-block w-100"
                  src="res/info/presentazione/ppt2.jpg"
                  alt="Second slide"
                />
              </div>
              <div class="carousel-item">
                <img
                  class="d-block w-100"
                  src="res/info/presentazione/ppt3.jpg"
                  alt="Third slide"
                />
              </div>
              <div class="carousel-item">
                <img
                  class="d-block w-100"
                  src="res/info/presentazione/ppt4.jpg"
                  alt="Fourth slide"
                />
              </div>
              <div class="carousel-item">
                <img
                  class="d-block w-100"
                  src="res/info/presentazione/ppt5.jpg"
                  alt="Fifth slide"
                />
              </div>
              <div class="carousel-item">
                <img
                  class="d-block w-100"
                  src="res/info/presentazione/ppt6.jpg"
                  alt="Sixth slide"
                />
              </div>
            </div>
            <button
              class="carousel-control-prev"
              type="button"
              data-bs-target="#carouselExampleControls"
              data-bs-slide="prev"
            >
              <span
                class="carousel-control-prev-icon"
                aria-hidden="true"
              ></span>
              <span class="visually-hidden">Previous</span>
            </button>
            <button
              class="carousel-control-next"
              type="button"
              data-bs-target="#carouselExampleControls"
              data-bs-slide="next"
            >
              <span
                class="carousel-control-next-icon"
                aria-hidden="true"
              ></span>
              <span class="visually-hidden">Next</span>
            </button>
          </div>
        </div>
        <div class="text">
          <h2>Presentazione Informativa</h2>
          <p>
            Un breve approfondimento per comprendere meglio cosa sia l’ansia da
            prestazione: da dove nasce, come si manifesta e quali strategie
            possiamo adottare per gestirla efficacemente.
          </p>
        </div>
      </div>

      <div class="section">
        <div class="media">
          <div class="img-container mx-auto">
            <img
              src="res/info/copertinaFumetto.jpg"
              class="copertinaFumetto img-fluid but-img fumetto-img"
              alt="copertinaFumetto"
            />
            <div
              class="overlay"
              onclick="fullScreen('res/info/fumettoAnsia.jpg')"
            >
              <div class="overlay-text material-icons">&#xe5d0;</div>
            </div>
          </div>
        </div>
        <div class="text">
          <h2>Fumetto sull'Ansia</h2>
          <p>
            Un racconto illustrato che spiega in modo semplice e accessibile
            cos’è l’ansia, da un punto di vista evolutivo e quotidiano, per
            aiutare a riconoscerla e affrontarla.
          </p>
        </div>
      </div>
    </div>

    <div id="carouselModal" class="modal-panel">
      <span class="close-panel" onclick="closeCarousel()">&times;</span>
      <div class="zoom-container" id="zoomContainer">
        <img
          class="modal-content-panel"
          id="modalImage"
          src=""
          alt="Fumetto Ansia"
        />
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      const zoomContainer = document.getElementById("zoomContainer");
      const modalImage = document.getElementById("modalImage");
      let scale = 1;
      let pos = { x: 0, y: 0 };
      let isDragging = false;
      let start = { x: 0, y: 0 };

      function updateTransform() {
        modalImage.style.transform = `translate(${pos.x}px, ${pos.y}px) scale(${scale})`;
      }

      // Mouse support
      zoomContainer.onmousedown = function (e) {
        isDragging = true;
        start = { x: e.clientX - pos.x, y: e.clientY - pos.y };
        zoomContainer.style.cursor = "grabbing";
      };

      zoomContainer.onmouseup = function () {
        isDragging = false;
        zoomContainer.style.cursor = "grab";
      };

      zoomContainer.onmouseleave = function () {
        isDragging = false;
        zoomContainer.style.cursor = "grab";
      };

      zoomContainer.onmousemove = function (e) {
        if (isDragging) {
          pos = { x: e.clientX - start.x, y: e.clientY - start.y };
          updateTransform();
        }
      };

      // Touch support
      zoomContainer.addEventListener("touchstart", function (e) {
        if (e.touches.length === 1) {
          isDragging = true;
          const touch = e.touches[0];
          start = { x: touch.clientX - pos.x, y: touch.clientY - pos.y };
        }
      });

      zoomContainer.addEventListener("touchmove", function (e) {
        if (isDragging && e.touches.length === 1) {
          const touch = e.touches[0];
          pos = { x: touch.clientX - start.x, y: touch.clientY - start.y };
          updateTransform();
        }
      });

      zoomContainer.addEventListener("touchend", function () {
        isDragging = false;
      });

      // Zoom with mouse wheel
      modalImage.onwheel = function (e) {
        e.preventDefault();
        const delta = e.deltaY > 0 ? -0.1 : 0.1;
        scale = Math.min(Math.max(0.5, scale + delta), 5);
        updateTransform();
      };

      function fullScreen(imgSrc) {
        scale = 1;
        pos = { x: 0, y: 0 };
        modalImage.style.transform = "none";
        modalImage.src = imgSrc;
        document.getElementById("carouselModal").style.display = "flex";
        document.body.style.overflow = "hidden";
      }

      function closeCarousel() {
        document.getElementById("carouselModal").style.display = "none";
        document.body.style.overflow = "auto";
      }

      // Blocca trascinamento immagini fuori dal modale
      document.querySelectorAll("img").forEach((img) => {
        img.addEventListener("dragstart", (e) => e.preventDefault());
      });
    </script>
  </body>
</html>
